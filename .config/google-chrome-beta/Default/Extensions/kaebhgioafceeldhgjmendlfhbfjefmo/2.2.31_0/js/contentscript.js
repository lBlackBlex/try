!(function(){function e(e){var t=window.navigator.userAgent,n=t.indexOf(e),i=0;if(n!=-1){n+=7;var o=t.indexOf(" ",n);if(o>n){var r=t.substr(n,o-n);i=parseInt(r.split(".")[0]);}}return i;}function t(){if(!o){var e=document.getElementsByTagName("body");if(0!=e.length&&""!=e[0].innerText){var t=document.createElement("meta"),n=document.createElement("object");if(t&&n){t.setAttribute("style","visibility: hidden !important; display: block !important; width: 0px !important; height: 0px !important; border-style: none !important;"),n.setAttribute("id","__EAGLEGET__"),navigator.userAgent.indexOf("x64")!=-1||navigator.userAgent.indexOf("Win64")!=-1||"Win64"==navigator.platform?n.setAttribute("type","application/x-eagleget64"):n.setAttribute("type","application/x-eagleget"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("style","visibility: hidden !important; display: block !important; width: 1px !important; height: 1px !important; border-style: none !important; position: absolute !important; top: 0px !important; left: 0px !important;"),t.appendChild(n),e[0].appendChild(t);try{n.downloadAll("");}catch(i){e[0].removeChild(t),n=null;}if(!n){return false;}o=n,n.AO(chrome,false),n.addEventListener("DownloadByCTX",u,false),chrome.extension.onMessage.addListener(function(e,t,n){o.onChromeRequest(e,t,n);});}}}}function n(){chrome.extension.onMessage.addListener(function(e,t,n){if("ctxclick"==e.name){return void u(e);}if("whitelist"==e.name&&e.content){console.log("whitelist");var i=document.createElement("script");i.textContent=e.content,(document.head||document.documentElement).appendChild(i),i.parentNode.removeChild(i);}}),chrome.extension.sendRequest({name:"initialize"},function(e){}),window.top==window.self&&(window.addEventListener("script",function(e){chrome.extension.sendRequest({name:"script",paramters:e.detail},function(e){});},true),window.addEventListener("decode_urls",function(e){chrome.extension.sendRequest({name:"decode_urls",paramters:e.detail},function(e){});},true)),document.addEventListener("keydown",function(e){e.ctrlKey&&e.altKey&&chrome.extension.sendRequest({name:"capture",paramters:false},function(e){});}),document.addEventListener("keyup",function(e){(e.ctrlKey||e.altKey)&&chrome.extension.sendRequest({name:"capture",paramters:true},function(e){});});}function i(){e("chrome")<43&&t(),o||n();}var o=null,r=function(e,t,n,i){var r=i;null==r&&(r="");var a=document.cookie;if(/http:|https:/.test(t)||(t=""),o){o.download(e,a,t,n);}else{var s={name:"menuDownload",url:e,referer:t,cookie:a,post:r};chrome.extension.sendRequest(s,function(e){});}},a="\n",s=function(e){return null==e?"":e.replace(/(\s|\r|\|)/g,"").replace(a,"");},c=function(e,t,n){/http:|https:/.test(t)||(t="");var i="",r="\\F ",c=t.replace(/(\n|\r|\|)/g,"");$.each(e,function(e,t){-1==t.indexOf("javascript:")&&-1==t.indexOf("mailto:")&&(i+=t+"|"+s(n[e])+a);});var u=document.cookie;if(u.replace(/(\n|\r|\|)/g,""),r+=i+"|"+c+"|"+u,o){o.downloadAll(r);}else{var d={name:"menuDownloads",AD:r};chrome.extension.sendRequest(d,function(e){});}},u=function(e){if(e.isall){var t=[],n=[];if(e.selc){var i=/(http:|https:|ftp:)\/\/[^ "'\r\n<>]+/gi,o=i.exec(e.selc);if(!o){return;}for(;o;){t.push(o[0]),n.push(""),o=i.exec(e.selc);}return void c(t,document.location.href,n);}return $.each(document.links,function(e,i){$.inArray(i.href,t)==-1&&(t.push(i.href),n.push(i.innerText));}),$("img").each(function(){var e=$(this)[0],i=e.alt;void 0!=i&&null!=i||(i=""),$.inArray(e.src,t)==-1&&(t.push(e.src),n.push(i));}),$("param").each(function(){var e=$(this)[0].value;$.inArray(e,t)==-1&&(t.push(e),n.push("object"));}),void(t.length>0&&c(t,document.location.href,n));}r(e.loc,document.location.href,"",null);};i();})();