function onClickStatus(e){extension.EG.AQ(),window.close();}function onClickMediaItem(e){if(e.target.id&&currTabId>0){var t=extension.EG.k(currTabId);if(!t){return;}var n=parseInt(e.target.id);if(n>=0&&n<t.length){var i=t[n];extension.EG.R(i.url,i.cookie,i.reffer,i.fileName,i.contentType,i.disposition,i.agent,i.postData,i.header,i.contentLength,i.segs);}}window.close();}function OnClickFeedback(e){chrome.tabs.create({url:"http://www.eagleget.com/thank-you/"},function(){});}function onRepair(e){chrome.tabs.create({url:"http://www.eagleget.com/download/setup.exe"},function(){});}function removeAll(){document.body.innerHTML="";}function createMenuItem(e,t,n,i,a,o){var r=document.createElement(e);document.body.appendChild(r),r.className=t;var d=document.createElement(n);return d.className=i,d.id=a,d.textContent=o,r.appendChild(d),r;}function restoreNormalStatus(){if(itemStatus=document.getElementById("chromeEnable"),!itemStatus){var e=extension.EG.b()?"item item-select":"item",t=extension.EG.b()?chrome.i18n.getMessage("enable"):chrome.i18n.getMessage("disable"),n=createMenuItem("div","item-box","div",e,"chromeEnable",t);document.body.appendChild(n);var n=createMenuItem("div","item-box","div","item item-select","feedback",chrome.i18n.getMessage("feedback"));return void document.body.appendChild(n);}itemStatus.className=extension.EG.b()?"item item-select":"item",itemStatus.textContent=extension.EG.b()?chrome.i18n.getMessage("enable"):chrome.i18n.getMessage("disable"),feedback=document.getElementById("feedback"),feedback.textContent=chrome.i18n.getMessage("feedback");}function showError(){removeAll();var e=document.createElement("p");e.innerHTML="<div class=\"guide\"><b><h3 style=\"text-align:center\"><font color='red'>EagleGet Exception</font></h3></b></div>",document.body.appendChild(e);var t=document.createElement("p");t.innerHTML="<div class=\"guide\">  there was an exception,need to reinstall the eagleget, do you want to reinstall\xEF\xBC\x9F<br></div>",document.body.appendChild(t);var n=document.createElement("p");n.setAttribute("align","center"),align=n.attributes.getNamedItem("align").value="center",n.innerHTML="<div class=\"downloadBtn\">Repair it!</div>",document.body.appendChild(n),n.addEventListener("click",onRepair);}function doMenuItem(e){chrome.tabs.query({currentWindow:true,active:true},function(t){if(t){var n=t[0];}var i=extension.EG.k(n.id);i&&e(n);});}function bytesToSize(e){var t=["Bytes","KB","MB","GB","TB"];if(0==e){return"0 Byte";}var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,n),2)+" "+t[n];}function initial(){return extension=chrome.extension.getBackgroundPage(),extension.EG.G?void showError():(restoreNormalStatus(),void doMenuItem(function(e){currTabId=e.id;var t=e.title;if(currTabId>0){var n=extension.EG.k(currTabId);n.length>0&&removeAll();for(var i=0;i<n.length;i++){var a=n[i],o=parseInt(a.contentLength),r=o>0?"-"+bytesToSize(o):"";a.fileName.length>0&&(t=a.fileName);var d=a.Z.length>0?t+" - "+a.Z:t,c=(i+1).toString()+". "+d+" ["+a.contentType.toUpperCase()+"] "+r;0==a.fileName.length&&(a.fileName=d);var B=createMenuItem("div","item-box","div","item",i,c);document.body.appendChild(B),B.addEventListener("click",onClickMediaItem);}}else{}}));}var extension,currTabId=0;document.addEventListener("DOMContentLoaded",function(){document.getElementById("chromeEnable").addEventListener("click",onClickStatus),document.getElementById("feedback").addEventListener("click",OnClickFeedback),initial();});